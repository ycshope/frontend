<!DOCTYPE html>
<html>

<head>
    <script>
        // HTML 本地存储：优于 cookies。
        //     什么是 HTML 本地存储？
        // 通过本地存储（Local Storage），web 应用程序能够在用户浏览器中对数据进行本地的存储。
        // 在 HTML5 之前，应用程序数据只能存储在 cookie 中，包括每个服务器请求。本地存储则更安全，并且可在不影响网站性能的前提下将大量数据存储于本地。
        // 与 cookie 不同，存储限制要大得多（至少5MB），并且信息不会被传输到服务器。
        // 本地存储经由起源地（origin）（经由域和协议）。所有页面，从起源地，能够存储和访问相同的数据。


        // HTML 本地存储提供了两个在客户端存储数据的对象：window.localStorage,window.sessionStorage

        // window.sessionStorage - 针对一个 session 来存储数据
        // （当关闭浏览器标签页时数据会丢失,不同的tab也会算做不同的session）
        function clickCounter() {
            if (typeof (Storage) !== "undefined") {
                if (sessionStorage.clickcount) {
                    sessionStorage.clickcount = Number(sessionStorage.clickcount) + 1;
                } else {
                    sessionStorage.clickcount = 1;
                }
                document.getElementById("result").innerHTML = "在本 session 中，您已经点击这个按钮 " + sessionStorage.clickcount + " 次。";
            } else {
                document.getElementById("result").innerHTML = "抱歉！您的浏览器不支持 Web Storage ...";
            }
        }

        // window.localStorage - ocalStorage 对象存储的是没有截止日期的数据。
        // 当浏览器被关闭时数据不会被删除，在下一天、周或年中，都是可用的。
        function storge() {
            // Store
            localStorage.setItem("lastname", "Gates");
            // Retrieve
            document.getElementById("result2").innerHTML = localStorage.getItem("lastname");
            //删除 "lastname" localStorage 项目的语法如下：
            // localStorage.removeItem("lastname");
        }
    </script>
</head>

<body>
    <p><button onclick="clickCounter()" type="button">请点击这里！</button></p>
    <div id="result"></div>
    <img onerror="storge()" style="display:none" src="#"/>
    <div id="result2"></div>
    <p>请点击按钮使计数器递增。</p>
    <p>请关闭浏览器或标签页，然后再试一次，计数器将继续计数（不会重置）。</p>
</body>

</html>