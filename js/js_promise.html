<!DOCTYPE html>
<html>

<body>

    <h1>JavaScript Promise</h1>
    <p id="demo1"></p>

    <h1>JavaScript Promise</h1>
    <p>等待 3 秒（3000 毫秒）让此页面发生变化。</p>
    <h1 id="demo2"></h1>

    <script>

        // 用途:JavaScript Promise 对象包含生产代码和对消费代码的调用：
        // 例子:1.等待超時,2.等待文件


        // Promise 语法
        // let myPromise = new Promise(function (myResolve, myReject) {
        //     // "Producing Code"（可能需要一些时间）

        //     myResolve(); // 成功时
        //     myReject();  // 出错时
        // });

        // // "Consuming Code" （必须等待一个兑现的承诺）
        // myPromise.then(
        //     function (value) { /* 成功时的代码 */ },
        //     function (error) { /* 出错时的代码 */ }
        // );

        function myDisplayer(some) {
            document.getElementById("demo1").innerHTML = some;
        }

        //new promise對象:第一個參數是回調成功,第二個是回調錯誤
        let myPromise1 = new Promise(function (myResolve, myReject) {
            let x = 0;

            // 一些代码（请尝试将 x 改为 5）
            if (x == 0) {
                myResolve("OK");
            } else {
                myReject("Error");
            }
        });

        // Promise.then() 有两个参数，一个是成功时的回调，另一个是失败时的回调。
        myPromise1.then(
            function (value) { myDisplayer(value); },
            function (error) { myDisplayer(error); }
        );


        //等待 3 秒（3000 毫秒）让此页面发生变化

        const myPromise2 = new Promise(function (myResolve, myReject) {
            setTimeout(function () { myResolve("I love You !!"); }, 3000);
        });
        //可以加個等待超時,文件也是同理
        myPromise2.then(function (value) {
            document.getElementById("demo2").innerHTML = value;
        });



    </script>

</body>

</html>